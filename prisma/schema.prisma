generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model User {
  id           String   @id @default(cuid())
  clerkId      String   @unique
  email        String   @unique
  name         String?
  role         Role     @default(STUDENT)
  createdAt    DateTime @default(now())
  applications Application[]
}

model Bursary {
  id          String   @id @default(cuid())
  title       String
  description String
  amount      Float
  eligibility String?
  deadline    DateTime?
  createdAt   DateTime @default(now())
  applications Application[]
}

model Application {
  id          String   @id @default(cuid())
  student     User     @relation(fields: [studentId], references: [id])
  studentId   String
  bursary     Bursary  @relation(fields: [bursaryId], references: [id])
  bursaryId   String
  statement   String?
  status      AppStatus @default(PENDING)
  createdAt   DateTime  @default(now())
  documents   Document[]
}

model Document {
  id            String   @id @default(cuid())
  application   Application @relation(fields: [applicationId], references: [id])
  applicationId String
  fileUrl       String
  verification  VerifyStatus @default(PENDING)
  createdAt     DateTime @default(now())
}

model Setting {
  key   String @id
  value String
}

enum Role {
  STUDENT
  STAFF
  ADMIN
}

enum AppStatus {
  PENDING
  APPROVED
  REJECTED
}

enum VerifyStatus {
  PENDING
  VALID
  INVALID
}
